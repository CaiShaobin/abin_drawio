<mxfile host="app.diagrams.net" modified="2022-10-08T10:08:50.181Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36 Edg/106.0.1370.34" etag="6CK4c5Hqj2rt43nn5qqZ" version="20.4.0" type="github" pages="4">
  <diagram id="PwJhe1wjSh3MadkxkBSW" name="NameServer">
    <mxGraphModel dx="1220" dy="681" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="u-5XYQakURa2LjXVgy3P-2" value="NameServer(JVM进程)" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="300" y="110" width="410" height="341" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-3" value="NamesrvController&lt;br&gt;请求处理组件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="50" y="100" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-4" value="NettyRemotingServer&lt;br&gt;网络服务器组件" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="20" y="196" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="u-5XYQakURa2LjXVgy3P-2" source="u-5XYQakURa2LjXVgy3P-5" target="u-5XYQakURa2LjXVgy3P-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-5" value="ServerBootstrap&lt;br&gt;（Netty服务器）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="60" y="236" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="u-5XYQakURa2LjXVgy3P-2" source="u-5XYQakURa2LjXVgy3P-6" target="u-5XYQakURa2LjXVgy3P-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="67" />
              <mxPoint x="230" y="120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-6" value="NamesrcConfig&lt;br&gt;配置信息" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="244" y="47" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="u-5XYQakURa2LjXVgy3P-2" source="u-5XYQakURa2LjXVgy3P-7" target="u-5XYQakURa2LjXVgy3P-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="137" />
              <mxPoint x="230" y="120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-7" value="NettyServerConfig&lt;br&gt;网络配置信息" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="244" y="117" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="u-5XYQakURa2LjXVgy3P-2" source="u-5XYQakURa2LjXVgy3P-8" target="u-5XYQakURa2LjXVgy3P-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="207" />
              <mxPoint x="230" y="120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-8" value="RouteInfoManager&lt;br&gt;路由管理组件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="244" y="187" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-12" value="9876端口" style="rhombus;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="u-5XYQakURa2LjXVgy3P-2">
          <mxGeometry x="65" y="374" width="110" height="45" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-16" value="拉取路由数据" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="u-5XYQakURa2LjXVgy3P-14" target="u-5XYQakURa2LjXVgy3P-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-14" value="客户端&lt;br&gt;Producer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="150" y="479" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-18" value="注册与心跳" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="u-5XYQakURa2LjXVgy3P-17" target="u-5XYQakURa2LjXVgy3P-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-17" value="Broker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="285" y="570" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-20" value="注册与心跳" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="u-5XYQakURa2LjXVgy3P-19" target="u-5XYQakURa2LjXVgy3P-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="u-5XYQakURa2LjXVgy3P-19" value="Broker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="475" y="570" width="80" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="YUmzI2muMx42VXiyNtH2" name="Broker">
    <mxGraphModel dx="1481" dy="827" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-1" value="Broker（JVM进程）" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="60" y="200" width="450" height="341" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-23" value="初始化" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="mu7gu3pV9ebxRQvl1UCO-1" source="mu7gu3pV9ebxRQvl1UCO-7" target="mu7gu3pV9ebxRQvl1UCO-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-25" value="启动" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.37;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="mu7gu3pV9ebxRQvl1UCO-1" source="mu7gu3pV9ebxRQvl1UCO-7" target="mu7gu3pV9ebxRQvl1UCO-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-7" value="BrokerStartUp&lt;br&gt;启动组件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="20" y="88" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-26" value="使用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.636;entryY=0.009;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="mu7gu3pV9ebxRQvl1UCO-1" source="mu7gu3pV9ebxRQvl1UCO-13" target="mu7gu3pV9ebxRQvl1UCO-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-13" value="核心配置组件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="170" y="88" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-14" value="BrokerController&lt;br&gt;管控组件&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="20" y="170" width="270" height="150" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-19" value="功能组件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="55" y="220" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-20" value="请求处理线程池" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="175" y="220" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-21" value="NettyServer&lt;br&gt;网络组件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="55" y="270" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-22" value="后台定时任务线程池" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="175" y="270" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-27" value="BrokerOuterAPI&lt;br&gt;对外通信组件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="330" y="140" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-28" value="NettyClient" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="mu7gu3pV9ebxRQvl1UCO-1">
          <mxGeometry x="340" y="174" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-29" value="NameServer路由注册中心组件" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="279" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-30" value="Producer的事务消息组件" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="459" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-31" value="注册Broker" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mu7gu3pV9ebxRQvl1UCO-28" target="mu7gu3pV9ebxRQvl1UCO-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mu7gu3pV9ebxRQvl1UCO-32" value="事务状态回查" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mu7gu3pV9ebxRQvl1UCO-28" target="mu7gu3pV9ebxRQvl1UCO-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="7tpIPlm6QJK9cWuUibea" name="MessageStore">
    <mxGraphModel dx="1037" dy="579" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="qDOl0TaXToG59cF-HHA2-1" value="业务系统" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="222.5" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-2" value="Producer" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="250" width="60" height="35" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-9" value="写入内存" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-4" target="qDOl0TaXToG59cF-HHA2-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-4" value="Broker" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="330" y="220" width="260" height="210" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-5" value="MessageQueue" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="385" y="250" width="150" height="35" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-6" target="qDOl0TaXToG59cF-HHA2-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="490" y="378" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-22" value="定期清理" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-6" target="qDOl0TaXToG59cF-HHA2-10">
          <mxGeometry x="-0.1934" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="490" y="378" />
              <mxPoint x="490" y="540" />
              <mxPoint x="380" y="540" />
              <mxPoint x="380" y="590" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-6" value="定时任务线程" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="357.5" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-17" value="转发消息" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-7" target="qDOl0TaXToG59cF-HHA2-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-18" value="转发消息" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-7" target="qDOl0TaXToG59cF-HHA2-16">
          <mxGeometry x="0.52" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-7" value="RequestMessageService线程" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="300" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-11" value="写入文件" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-8" target="qDOl0TaXToG59cF-HHA2-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-24" value="拉取要转发的消息" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-8" target="qDOl0TaXToG59cF-HHA2-7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="270" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-8" value="MappedFile&lt;br&gt;零拷贝文件映射" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="230" y="500" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-10" value="CommitLog" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="230" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-12" value="IndexFile" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="690" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-13" value="ConsumeQueue" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="460" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-21" value="写入文件" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-15" target="qDOl0TaXToG59cF-HHA2-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-15" value="ConsumeQueueDispatcher" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="580" y="460" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-19" value="写入文件" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-16" target="qDOl0TaXToG59cF-HHA2-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-16" value="IndexDispatcher" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="780" y="460" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qDOl0TaXToG59cF-HHA2-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="qDOl0TaXToG59cF-HHA2-2" target="qDOl0TaXToG59cF-HHA2-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="yTXTeLZQcK08TXpiZ15z" name="Consumer">
    <mxGraphModel dx="1542" dy="399" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="N7BtS0nyamSBo5LpFgfi-1" value="PullMessageService" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="4" y="30" width="190" height="440" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-1" source="N7BtS0nyamSBo5LpFgfi-5" target="N7BtS0nyamSBo5LpFgfi-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-5" value="run" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-1">
          <mxGeometry x="53" y="40" width="84" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-1" source="N7BtS0nyamSBo5LpFgfi-6" target="N7BtS0nyamSBo5LpFgfi-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-6" value="pullRequestQueue take()" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-1">
          <mxGeometry x="31.5" y="110" width="127" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-10" value="pullMessage(PullRequest)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-1">
          <mxGeometry x="20.75" y="190" width="148.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-14" value="pullMessage在发送pullMessageAysnc后即返回，拉取任务为异步操作" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-1">
          <mxGeometry x="35" y="260" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-2" value="DefaultMQPushConsumerImpl" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="194" y="30" width="210" height="440" as="geometry">
            <mxRectangle x="460" y="385" width="210" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-2" source="N7BtS0nyamSBo5LpFgfi-15" target="N7BtS0nyamSBo5LpFgfi-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-15" value="获取ProcessQueue" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-2">
          <mxGeometry x="46.5" y="50" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-2" source="N7BtS0nyamSBo5LpFgfi-16" target="N7BtS0nyamSBo5LpFgfi-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-16" value="消息拉取流控" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-2">
          <mxGeometry x="46.5" y="110" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-2" source="N7BtS0nyamSBo5LpFgfi-17" target="N7BtS0nyamSBo5LpFgfi-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-17" value="获取主题订阅信息" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-2">
          <mxGeometry x="46.5" y="170" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-2" source="N7BtS0nyamSBo5LpFgfi-18" target="N7BtS0nyamSBo5LpFgfi-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-18" value="构建信息拉取系统标记" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-2">
          <mxGeometry x="38.25" y="230" width="133.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-2" source="N7BtS0nyamSBo5LpFgfi-19" target="N7BtS0nyamSBo5LpFgfi-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-19" value="获取Broker或FilterServer地址" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-2">
          <mxGeometry x="38.25" y="290" width="133.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-20" value="pullMessageAsync" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-2">
          <mxGeometry x="38.25" y="350" width="133.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-3" value="MQClientAPIImpl" style="swimlane;startSize=23;" vertex="1" parent="1">
          <mxGeometry x="404" y="30" width="210" height="440" as="geometry">
            <mxRectangle x="460" y="385" width="210" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-21" value="向服务端发送RequestCode.&lt;br&gt;PULL_MESSAGE" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-3">
          <mxGeometry x="46.5" y="40" width="117" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-3" source="N7BtS0nyamSBo5LpFgfi-22" target="N7BtS0nyamSBo5LpFgfi-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-22" value="返回拉取信息结果" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-3">
          <mxGeometry x="46.5" y="120" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-3" source="N7BtS0nyamSBo5LpFgfi-23" target="N7BtS0nyamSBo5LpFgfi-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-23" value="PullAPIWrapper编解码拉取结果" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-3">
          <mxGeometry x="46.5" y="180" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-3" source="N7BtS0nyamSBo5LpFgfi-24" target="N7BtS0nyamSBo5LpFgfi-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-24" value="执行PullCallBack回调方法" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-3">
          <mxGeometry x="46.5" y="240" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-3" source="N7BtS0nyamSBo5LpFgfi-25" target="N7BtS0nyamSBo5LpFgfi-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-25" value="执行消息过滤逻辑" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-3">
          <mxGeometry x="46.5" y="300" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-26" value="将拉取的消息提交到消费者消费消息线程池" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-3">
          <mxGeometry x="46.5" y="360" width="117" height="50" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-4" value="PullMessageProcessor" style="swimlane;startSize=23;" vertex="1" parent="1">
          <mxGeometry x="614" y="30" width="210" height="440" as="geometry">
            <mxRectangle x="460" y="385" width="210" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N7BtS0nyamSBo5LpFgfi-4" source="N7BtS0nyamSBo5LpFgfi-27" target="N7BtS0nyamSBo5LpFgfi-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-27" value="获取ProcessQueue" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-4">
          <mxGeometry x="46.5" y="50" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-28" value="MessageStroe.&lt;br&gt;getMessage(包含信息过滤逻辑)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="N7BtS0nyamSBo5LpFgfi-4">
          <mxGeometry x="46.5" y="110" width="117" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-10" target="N7BtS0nyamSBo5LpFgfi-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-20" target="N7BtS0nyamSBo5LpFgfi-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-21" target="N7BtS0nyamSBo5LpFgfi-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-28" target="N7BtS0nyamSBo5LpFgfi-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-20" target="N7BtS0nyamSBo5LpFgfi-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-44" value="将pullRequest添加到pullRequestQueue中" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.481;exitY=0.867;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="99" y="400" as="targetPoint" />
            <Array as="points">
              <mxPoint x="99" y="359" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="N7BtS0nyamSBo5LpFgfi-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="N7BtS0nyamSBo5LpFgfi-26">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="120" as="targetPoint" />
            <Array as="points">
              <mxPoint x="509" y="450" />
              <mxPoint x="180" y="450" />
              <mxPoint x="180" y="120" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
